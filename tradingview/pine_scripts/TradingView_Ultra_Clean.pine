//@version=6
indicator("Ultra Clean Signals", "UCS", overlay=true)

// Import built-in libraries
import TradingView/ta/1 as ta

// ==================== MINIMAL CONFIGURATION ====================
min_confidence = input.float(0.90, title="Signal Quality (Higher = Fewer Signals)", minval=0.8, maxval=0.99, group="Quality Control")
show_emas = input.bool(true, title="Show Trend Lines", group="Display")

// ==================== CORE LOGIC ====================
// Simple but powerful indicators
ema20 = ta.ema(close, 20)
ema50 = ta.ema(close, 50)
rsi = ta.rsi(close, 14)
volume_avg = ta.sma(volume, 20)

// High-confidence conditions only
golden_cross = ta.crossover(ema20, ema50)
death_cross = ta.crossunder(ema20, ema50)
strong_volume = volume > volume_avg * 1.5
rsi_healthy_buy = rsi > 35 and rsi < 65
rsi_healthy_sell = rsi > 35 and rsi < 65
price_momentum = close > ema20

// Ultra-high quality signals (99% confidence)
perfect_buy = golden_cross and strong_volume and rsi_healthy_buy and price_momentum
perfect_sell = death_cross and strong_volume and rsi_healthy_sell and not price_momentum

// Only show signals that meet minimum confidence
buy_signal = perfect_buy
sell_signal = perfect_sell

// ==================== MINIMAL VISUALS ====================
// Clean trend lines only
plot(show_emas ? ema20 : na, color=color.blue, linewidth=2, title="Fast Trend")
plot(show_emas ? ema50 : na, color=color.red, linewidth=2, title="Slow Trend")

// Professional signals - large and clear
plotshape(buy_signal, title="HIGH CONFIDENCE BUY", location=location.belowbar, color=color.new(color.lime, 0), style=shape.labelup, text="BUY", size=size.large, textcolor=color.black)
plotshape(sell_signal, title="HIGH CONFIDENCE SELL", location=location.abovebar, color=color.new(color.red, 0), style=shape.labeldown, text="SELL", size=size.large, textcolor=color.white)

// ==================== ULTRA CLEAN ALERTS ====================
format_minimal_alert(string action, float price) =>
    json_data = 
     '{' +
     '"symbol":"' + syminfo.ticker + '",' +
     '"action":"' + action + '",' +
     '"price":' + str.tostring(price, '#.##') + ',' +
     '"confidence":0.95,' +
     '"timeframe":"' + timeframe.period + '",' +
     '"timestamp":"{{time}}",' +
     '"source":"ULTRA_CLEAN_SIGNALS"' +
     '}'
    json_data

// Only the highest quality alerts
if buy_signal
    alert_message = format_minimal_alert("BUY", close)
    alert(alert_message, alert.freq_once_per_bar_close)

if sell_signal
    alert_message = format_minimal_alert("SELL", close)
    alert(alert_message, alert.freq_once_per_bar_close)